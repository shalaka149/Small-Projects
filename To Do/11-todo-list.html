<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TO-DO list</title>
  <link rel="stylesheet" href="11-todo-list.css" />
</head>

<body>
  <div class="container">
    <p>To Do List</p>
    <div class="todo-input-grid">
      <input placeholder="Todo name" class="js-name-input name-input" />
      <input type="date" class="js-due-date-input due-date-input" />
      <button onclick="addTodo()" class="add-todo-button">Add</button>
    </div>
    <div class="js-todo-list todo-grid"></div>
  </div>

  <script>
    const todoList = [
      { name: 'make dinner', dueDate: '2022-12-22', completed: false },
      { name: 'wash dishes', dueDate: '2022-12-22', completed: false }
    ];

    document.querySelector('.js-name-input')
      .addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
          addTodo();
        }
      });

    function renderTodoList() {
      let todoListHTML = '';
      for (let i = 0; i < todoList.length; i++) {
        const todo = todoList[i];

        const nameClass = todo.completed ? 'todo-name completed checkmark' : 'todo-name';
        const html = `
          <div class="${nameClass}" onclick="toggleComplete(${i})">${todo.name}</div>
          <div>${todo.dueDate}</div>
          <button onclick="deleteTodo(${i})" class="delete-todo-button">Delete</button>
        `;
        todoListHTML += html;
      }

      document.querySelector('.js-todo-list').innerHTML = todoListHTML;
    }

    function addTodo() {
      const inputElement = document.querySelector('.js-name-input');
      const dateInputElement = document.querySelector('.js-due-date-input');

      const name = inputElement.value.trim();
      const dueDate = dateInputElement.value;

      if (!name || !dueDate) {
        alert('Please enter both a task name and a due date.');
        return;
      }

      todoList.push({ name, dueDate, completed: false });

      inputElement.value = '';
      dateInputElement.value = '';

      renderTodoList();
    }

    function deleteTodo(index) {
      todoList.splice(index, 1);
      renderTodoList();
    }

    function toggleComplete(index) {
      todoList[index].completed = !todoList[index].completed;
      renderTodoList();
    }

    renderTodoList();
  </script>
</body>

</html>
